<p-dialog header="header"
          [(visible)]="visible"
          [modal]="true"
          [draggable]="false"
          [closable]="true"
          [dismissableMask]="true"
          [style]="{width: '50vw'}"
          (onHide)="onClose()">

    <!-- Cabecera del diálogo -->
    <ng-template pTemplate="header">
        <div class="inline-flex align-items-center justify-content-center gap-2">
            <p-avatar
                    [image]="spell?.magicSchool | spellImage"
                    size="large"
                    shape="circle">
            </p-avatar>
            <span class="font-bold white-space-nowrap">
                    {{ spell?.name }}
            </span>
        </div>
    </ng-template>

    <!-- Nivel y Escuela -->
    <div *ngIf="spell">

        <span>
            Nivel {{ spell.level === 0 ? 'Truco' : spell.level }}, {{ spell.magicSchool }}
        </span>

        <!-- Badges para Concentración y Ritual -->
        <div class="flex gap-2 my-3">
            <p-badge *ngIf="spell.concentration" value="Concentración" styleClass="p-mr-2 p-badge-info"></p-badge>
            <p-badge *ngIf="spell.ritual" value="Ritual" styleClass="p-badge-success"></p-badge>
        </div>

        <!-- Información estructurada -->
        <div class="flex flex-column gap-2">
            <span><span class="font-bold">Componentes:</span> {{ spell.components }}</span>
            <span *ngIf="spell.materials"><span class="font-bold">Materiales:</span> {{ spell.materials }}</span>
            <span><span class="font-bold">Tiempo de lanzamiento:</span> {{ spell.castingTime }}</span>
            <span><span class="font-bold">Alcance:</span> {{ spell.range }}</span>
            <span><span class="font-bold">Duración:</span> {{ spell.duration }}</span>
        </div>

        <!-- Descripción -->
        <div class="mt-3" *ngIf="spell">
            <p>{{ spell.description }}</p>
        </div>

        <!-- Mejoras en niveles altos -->
        <div class="mt-3" *ngIf="spell">
            <p><span class="font-bold">En niveles superiores:</span> {{ spell.highLevelsDescription }}</p>
        </div>

        <!-- Badges para las Clases -->
        <div class="flex gap-2 my-3">
            <p-badge *ngFor="let clazz of spell.classes" [value]="clazz" styleClass="p-badge-warning"></p-badge>
        </div>

    </div>

</p-dialog>
